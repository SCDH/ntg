

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>API Server &mdash; NTG 0.1.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Server Configuration Files" href="server_config.html" />
    <link rel="prev" title="Web Client" href="client_dev.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> NTG
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#basic-terms-and-procedures-of-the-coherence-based-genealogical-method-cbgm">Basic Terms and Procedures of the Coherence-Based Genealogical Method (CBGM)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="intro.html#links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install-linux.html">Installation on Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#install-prerequisites">Install Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#database-access">Database Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#application-server">Application server</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#cbgm">CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#run-server">Run Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#build-and-run-client">Build and run client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install-docker.html">Installation with Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#running-the-web-application">Running the web application</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#running-the-cbgm">Running the CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user.html">User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="client_user.html">Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_user.html">Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="server_user.html#server-main-py">server/__main__.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts_user.html">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-import-py">scripts/cceh/import.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-prepare-py">scripts/cceh/prepare.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-cbgm-py">scripts/cceh/cbgm.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-save-edits-py">scripts/cceh/save_edits.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-load-edits-py">scripts/cceh/load_edits.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-mk-users-py">scripts/cceh/mk_users.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="developer.html">Developer Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="client_dev.html">Web Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="client_dev.html#module-client-app">Modules</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">API Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.main">server.main</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.textflow">server.textflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.comparison">server.comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.set_cover">server.set_cover</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.editor">server.editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.login">server.login</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-server.helpers">server.helpers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="server_config.html">API Server Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="server_config.html#per-application-configuration-files">Per-Application Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_config.html#global-configuration-file">Global Configuration File</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_config.html#footnotes">Footnotes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts_dev.html">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.import">scripts.cceh.import</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.prepare">scripts.cceh.prepare</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.cbgm">scripts.cceh.cbgm</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.save_edits">scripts.cceh.save_edits</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.load_edits">scripts.cceh.load_edits</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.mk_users">scripts.cceh.mk_users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#cbgm-database">CBGM Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#source-databases">Source Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#literature">Literature</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database_faq.html">Database FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database_faq.html#manual-editing-of-journalled-tables">Manual Editing of Journalled Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="database_faq.html#apparatus-updates">Apparatus Updates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ntg_common.html">Common Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.cbgm_common">ntg_common.cbgm_common</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.config">ntg_common.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.db_tools">ntg_common.db_tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.exceptions">ntg_common.exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.tools">ntg_common.tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vm.html">ntg.uni-muenster.de</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vm.html#apache">Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="vm.html#api-server">API Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="vm.html#postgres">Postgres</a></li>
<li class="toctree-l3"><a class="reference internal" href="vm.html#users">Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="vm.html#backups">Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="vm.html#icinga">Icinga</a></li>
<li class="toctree-l3"><a class="reference internal" href="vm.html#openstack-cloud">OpenStack Cloud</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cbgm.html">CBGM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#preparing-the-database-for-the-cbgm">Preparing the Database for the CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#applying-the-cbgm">Applying the CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#starting-a-new-project">Starting a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#starting-a-new-phase">Starting a New Phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#starting-a-new-phase-with-apparatus-update">Starting a New Phase With Apparatus Update</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user_management.html">User Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user_management.html#manual-user-management">Manual User Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="technologies.html">Technologies Used</a><ul>
<li class="toctree-l3"><a class="reference internal" href="technologies.html#server">Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="technologies.html#client">Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="technologies.html#scripts">Scripts</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NTG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="developer.html">Developer Manual</a> &raquo;</li>
        
      <li>API Server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/server_dev.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-server">
<h1>API Server<a class="headerlink" href="#api-server" title="Permalink to this headline">¶</a></h1>
<p>The API server is written in Python using the
<a class="reference external" href="https://flask.palletsprojects.com/">Flask framework</a>.</p>
<div class="figure" id="id1">
<div  class="pic pic-format-text-plain pic-language-tree">
<div class="highlight"><div class="highlight"><pre>{arguments} [error opening dir]
</pre></div></div></div>
<p class="caption"><span class="caption-text">Server directory structure</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#module-server" id="id2">server</a></p></li>
<li><p><a class="reference internal" href="#module-server.main" id="id3">server.main</a></p></li>
<li><p><a class="reference internal" href="#module-server.textflow" id="id4">server.textflow</a></p></li>
<li><p><a class="reference internal" href="#module-server.comparison" id="id5">server.comparison</a></p></li>
<li><p><a class="reference internal" href="#module-server.set_cover" id="id6">server.set_cover</a></p></li>
<li><p><a class="reference internal" href="#module-server.editor" id="id7">server.editor</a></p></li>
<li><p><a class="reference internal" href="#module-server.login" id="id8">server.login</a></p></li>
<li><p><a class="reference internal" href="#module-server.helpers" id="id9">server.helpers</a></p></li>
</ul>
</div>
<div class="section" id="module-server">
<span id="server"></span><h2><a class="toc-backref" href="#id2">server</a><a class="headerlink" href="#module-server" title="Permalink to this headline">¶</a></h2>
<p>This package implements the application server for CBGM.</p>
</div>
<div class="section" id="module-server.main">
<span id="server-main"></span><h2><a class="toc-backref" href="#id3">server.main</a><a class="headerlink" href="#module-server.main" title="Permalink to this headline">¶</a></h2>
<p>The API server for CBGM.  The main functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="server.main.apparatus_json">
<span class="sig-name descname"><span class="pre">apparatus_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.apparatus_json" title="Permalink to this definition">¶</a></dt>
<dd><p>The contents of the apparatus table.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.application_json">
<span class="sig-name descname"><span class="pre">application_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.main.application_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve information about the application.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.attestation_json">
<span class="sig-name descname"><span class="pre">attestation_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.attestation_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Answer with a list of the attestations of all manuscripts at one specified
passage.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.attesting_csv">
<span class="sig-name descname"><span class="pre">attesting_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labez</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.attesting_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve all relatives of all mss. attesting labez at passage.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.cliques_json">
<span class="sig-name descname"><span class="pre">cliques_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.cliques_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve all cliques found in a passage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>passage_or_id</strong> (<em>string</em>) – The passage id.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the flask app.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.leitzeile_json">
<span class="sig-name descname"><span class="pre">leitzeile_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.leitzeile_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve the leitzeile for the verse containing passage_or_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.manuscript_full_json">
<span class="sig-name descname"><span class="pre">manuscript_full_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hs_hsnr_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.manuscript_full_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve information about a manuscript.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hs_hsnr_id</strong> (<em>string</em>) – The hs, hsnr or id of the manuscript.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.manuscript_json">
<span class="sig-name descname"><span class="pre">manuscript_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hs_hsnr_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.manuscript_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve information about a manuscript.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hs_hsnr_id</strong> (<em>string</em>) – The hs, hsnr or id of the manuscript.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.passage_json">
<span class="sig-name descname"><span class="pre">passage_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.passage_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve information about a passage.</p>
<p>Return information about a passage or navigate to it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>passage_or_id</strong> (<em>string</em>) – The passage id.</p></li>
<li><p><strong>siglum</strong> (<em>string</em>) – The siglum of the book to navigate to.</p></li>
<li><p><strong>chapter</strong> (<em>string</em>) – The chapter to navigate to.</p></li>
<li><p><strong>verse</strong> (<em>string</em>) – The verse to navigate to.</p></li>
<li><p><strong>word</strong> (<em>string</em>) – The word (range) to navigate to.</p></li>
<li><p><strong>button</strong> (<em>string</em>) – The button pressed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.ranges_json">
<span class="sig-name descname"><span class="pre">ranges_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.main.ranges_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve a list of ranges.</p>
<p>Serves a list of the configured ranges that are contained inside a book in
the NT.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.readings_json">
<span class="sig-name descname"><span class="pre">readings_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.readings_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Serve all readings found in a passage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>passage_or_id</strong> (<em>string</em>) – The passage id.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.relatives_csv">
<span class="sig-name descname"><span class="pre">relatives_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hs_hsnr_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.main.relatives_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a table of the nearest relatives of a manuscript.</p>
<p>Output a table of the nearest relatives/ancestors/descendants of a
manuscript and what they attest.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.main.suggest_json">
<span class="sig-name descname"><span class="pre">suggest_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.main.suggest_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  The suggestion drop-downs in the navigator.</p>
<p>Serves a list of books, chapters, verses, or words that the user can enter
in the navigation gadget.  It suggests only entities that are actually in
the database.</p>
</dd></dl>

</div>
<div class="section" id="module-server.textflow">
<span id="server-textflow"></span><h2><a class="toc-backref" href="#id4">server.textflow</a><a class="headerlink" href="#module-server.textflow" title="Permalink to this headline">¶</a></h2>
<p>The API server for CBGM.  The textflow and stemmata diagrams.</p>
<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the flask app.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.remove_z_leaves">
<span class="sig-name descname"><span class="pre">remove_z_leaves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.remove_z_leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes leaves (recursively) if they read z.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.stemma">
<span class="sig-name descname"><span class="pre">stemma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.stemma" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a local stemma in dot format.</p>
<p>A local stemma is a DAG (directed acyclic graph).  The layout of the DAG is
precomputed on the server using GraphViz.  GraphViz adds a precomputed
position to each node and a precomputed bezier path to each edge.</p>
<p>N.B. I also considered client-side layout of DAGs, but found only 2 viable
libraries:</p>
<ul class="simple">
<li><p>dagre.  Javascript clone of GraphViz.  Unmaintained.  Buggy.  Does not
work well with require.js.</p></li>
<li><p>viz.js.  GraphViz cross-compiled to Javascript with Emscripten.  Huge.
Promising but still early days.</p></li>
</ul>
<p>Both libraries have their drawbacks so the easiest way out was to precompute
the layout on the server.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.stemma_dot">
<span class="sig-name descname"><span class="pre">stemma_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.stemma_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a local stemma diagram in .dot format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.stemma_png">
<span class="sig-name descname"><span class="pre">stemma_png</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.stemma_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a local stemma diagram in .png format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.textflow">
<span class="sig-name descname"><span class="pre">textflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.textflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a stemma of manuscripts.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.textflow_dot">
<span class="sig-name descname"><span class="pre">textflow_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.textflow_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a textflow diagram in .dot format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.textflow.textflow_png">
<span class="sig-name descname"><span class="pre">textflow_png</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.textflow.textflow_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a textflow diagram in .png format.</p>
</dd></dl>

</div>
<div class="section" id="module-server.comparison">
<span id="server-comparison"></span><h2><a class="toc-backref" href="#id5">server.comparison</a><a class="headerlink" href="#module-server.comparison" title="Permalink to this headline">¶</a></h2>
<p>The comparison function of the API server for CBGM.</p>
<dl class="py function">
<dt class="sig sig-object py" id="server.comparison.comparison_detail">
<span class="sig-name descname"><span class="pre">comparison_detail</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.comparison.comparison_detail" title="Permalink to this definition">¶</a></dt>
<dd><p>Output comparison of 2 witnesses, chapter detail.</p>
<p>Outputs a detail of the differences between 2 manuscripts in one chapter.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.comparison.comparison_detail_csv">
<span class="sig-name descname"><span class="pre">comparison_detail_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.comparison.comparison_detail_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint. Serve a CSV table. (see also <a class="reference internal" href="#server.comparison.comparison_detail" title="server.comparison.comparison_detail"><code class="xref py py-func docutils literal notranslate"><span class="pre">comparison_detail()</span></code></a>)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.comparison.comparison_summary">
<span class="sig-name descname"><span class="pre">comparison_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.comparison.comparison_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Output comparison of 2 witnesses, chapter summary.</p>
<p>Outputs a summary of the differences between 2 manuscripts, one summary row
per chapters.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.comparison.comparison_summary_csv">
<span class="sig-name descname"><span class="pre">comparison_summary_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.comparison.comparison_summary_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint. Serve a CSV table. (see also <a class="reference internal" href="#server.comparison.comparison_summary" title="server.comparison.comparison_summary"><code class="xref py py-func docutils literal notranslate"><span class="pre">comparison_summary()</span></code></a>)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.comparison.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.comparison.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the flask app.</p>
</dd></dl>

</div>
<div class="section" id="module-server.set_cover">
<span id="server-set-cover"></span><h2><a class="toc-backref" href="#id6">server.set_cover</a><a class="headerlink" href="#module-server.set_cover" title="Permalink to this headline">¶</a></h2>
<p>The API server for CBGM.  The optimal substemma and set cover module.</p>
<p>See: CBGM_Pres.pdf p. 490ff.</p>
<dl class="py class">
<dt class="sig sig-object py" id="server.set_cover.Combination">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Combination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.Combination" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a combination of manuscripts.</p>
<dl class="py method">
<dt class="sig sig-object py" id="server.set_cover.Combination.explained">
<span class="sig-name descname"><span class="pre">explained</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.Combination.explained" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate how many variants are explained by this combination.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.set_cover.Combination.score">
<span class="sig-name descname"><span class="pre">score</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.Combination.score" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the score for the given combination.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.set_cover.Combination.to_csv">
<span class="sig-name descname"><span class="pre">to_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.Combination.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Output the combination in CSV format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.set_cover.Combination.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.Combination.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Output the combination in JSON format.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.build_explain_matrix">
<span class="sig-name descname"><span class="pre">build_explain_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.build_explain_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the explain matrix.</p>
<p>A matrix of 1 x n_passages containing the bitmask of all those readings that
would explain the reading in the manuscript under scrutiny.</p>
<p>Bit 1 means: the reading stems from an unknown source.
Bit 2..64 are the bitmask of all cliques.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.get_ancestors">
<span class="sig-name descname"><span class="pre">get_ancestors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rg_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.get_ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all ancestors of ms.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.init">
<span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Do some preparative calculations and cache the results.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Init the Flask app.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.optimal_substemma_csv">
<span class="sig-name descname"><span class="pre">optimal_substemma_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.optimal_substemma_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Do an exhaustive search for the combination among a given set of ancestors
that best explains a given manuscript.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.optimal_substemma_detail_csv">
<span class="sig-name descname"><span class="pre">optimal_substemma_detail_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.optimal_substemma_detail_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Report details about one combination of ancestors.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.optimal_substemma_json">
<span class="sig-name descname"><span class="pre">optimal_substemma_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.optimal_substemma_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize parameters only and add some general info.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.powerset">
<span class="sig-name descname"><span class="pre">powerset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[1,2,3])</span> <span class="pre">--&gt;</span> <span class="pre">()</span> <span class="pre">(1,)</span> <span class="pre">(2,)</span> <span class="pre">(3,)</span> <span class="pre">(1,2)</span> <span class="pre">(1,3)</span> <span class="pre">(2,3)</span> <span class="pre">(1,2,3</span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.powerset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.set_cover.set_cover_json">
<span class="sig-name descname"><span class="pre">set_cover_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hs_hsnr_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.set_cover.set_cover_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate the minimum set cover for a manuscript.</p>
<p>See: <a class="reference external" href="https://en.wikipedia.org/wiki/Set_cover_problem">https://en.wikipedia.org/wiki/Set_cover_problem</a></p>
</dd></dl>

</div>
<div class="section" id="module-server.editor">
<span id="server-editor"></span><h2><a class="toc-backref" href="#id7">server.editor</a><a class="headerlink" href="#module-server.editor" title="Permalink to this headline">¶</a></h2>
<p>The API server for CBGM.  Stemma editing module.</p>
<dl class="py function">
<dt class="sig sig-object py" id="server.editor.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.editor.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the flask app.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.editor.notes_json">
<span class="sig-name descname"><span class="pre">notes_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">range_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.editor.notes_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Endpoint.  Get a list of all editor notes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.editor.notes_txt">
<span class="sig-name descname"><span class="pre">notes_txt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.editor.notes_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Read or write the editor notes for a passage</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.editor.stemma_edit">
<span class="sig-name descname"><span class="pre">stemma_edit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.editor.stemma_edit" title="Permalink to this definition">¶</a></dt>
<dd><p>Edit a local stemma.</p>
<p>Called from local-stemma.js (split, merge, move) and textflow.js (move-manuscripts).</p>
</dd></dl>

</div>
<div class="section" id="module-server.login">
<span id="server-login"></span><h2><a class="toc-backref" href="#id8">server.login</a><a class="headerlink" href="#module-server.login" title="Permalink to this headline">¶</a></h2>
<p>An application server for CBGM.  User management module.</p>
<dl class="py class">
<dt class="sig sig-object py" id="server.login.AnonymousUserMixin">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">AnonymousUserMixin</span></span><a class="headerlink" href="#server.login.AnonymousUserMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the default object for representing an anonymous user.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.auth">
<span class="sig-name descname"><span class="pre">auth</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.login.auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if user is authorized to see what follows.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.declare_user_model_on">
<span class="sig-name descname"><span class="pre">declare_user_model_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.login.declare_user_model_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare the user model on flask_sqlalchemy.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.edit_auth">
<span class="sig-name descname"><span class="pre">edit_auth</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.login.edit_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if user is authorized to edit.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.login.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the flask app.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.make_safe_url">
<span class="sig-name descname"><span class="pre">make_safe_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.login.make_safe_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns an unsafe absolute URL into a safe relative URL
by removing the scheme and the hostname</p>
<dl class="simple">
<dt>Example: make_safe_url(‘<a class="reference external" href="http://hostname/path1/path2?q1=v1&amp;q2=v2#fragment">http://hostname/path1/path2?q1=v1&amp;q2=v2#fragment</a>’)</dt><dd><p>returns: ‘/path1/path2?q1=v1&amp;q2=v2#fragment</p>
</dd>
</dl>
<p>Copied from flask_user/views.py because it was defective.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.private_auth">
<span class="sig-name descname"><span class="pre">private_auth</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.login.private_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if user is authorized to see what follows.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.user_can_read">
<span class="sig-name descname"><span class="pre">user_can_read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.login.user_can_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if user has read access.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.user_can_read_private">
<span class="sig-name descname"><span class="pre">user_can_read_private</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.login.user_can_read_private" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if user has read access.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.login.user_can_write">
<span class="sig-name descname"><span class="pre">user_can_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.login.user_can_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if user has write access.</p>
</dd></dl>

</div>
<div class="section" id="module-server.helpers">
<span id="server-helpers"></span><h2><a class="toc-backref" href="#id9">server.helpers</a><a class="headerlink" href="#module-server.helpers" title="Permalink to this headline">¶</a></h2>
<p>An application server for CBGM.  Helper classes.</p>
<dl class="py class">
<dt class="sig sig-object py" id="server.helpers.Bag">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Bag</span></span><a class="headerlink" href="#server.helpers.Bag" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to stick values in.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="server.helpers.EXCLUDE_REGEX_MAP">
<span class="sig-name descname"><span class="pre">EXCLUDE_REGEX_MAP</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'A':</span> <span class="pre">'A',</span> <span class="pre">'F':</span> <span class="pre">'F[1-9Π][0-9]*',</span> <span class="pre">'MT':</span> <span class="pre">'MT'}</span></em><a class="headerlink" href="#server.helpers.EXCLUDE_REGEX_MAP" title="Permalink to this definition">¶</a></dt>
<dd><p>Regexes for the include/exclude toolbar buttons.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="server.helpers.Manuscript">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Manuscript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manuscript_id_or_hs_or_hsnr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.Manuscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent one manuscript.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="server.helpers.Passage">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Passage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passage_or_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.Passage" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents one passage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="server.helpers.Passage.range_id">
<span class="sig-name descname"><span class="pre">range_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">range_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.Passage.range_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the id of the range containing this passage.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="server.helpers.Word">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Word</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.Word" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents one word address.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.helpers.csvify">
<span class="sig-name descname"><span class="pre">csvify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.csvify" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a HTTP response in CSV format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.helpers.get_excluded_ms_ids">
<span class="sig-name descname"><span class="pre">get_excluded_ms_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.get_excluded_ms_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ms_ids of manuscripts to exclude.</p>
<p>Helps to implement the buttons “A”, “MT”, and “F” in the toolbar.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.helpers.nx_to_dot">
<span class="sig-name descname"><span class="pre">nx_to_dot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">960.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodesep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.nx_to_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an nx graph into a dot file.</p>
<p>We’d like to sort the nodes in the graph, but nx internally uses
dictionaries “all the way down”.  Thus the only chance to sort nodes and
edges is while writing the file.  This function is a lightweight
re-implementation of nx.nx_pydot.to_pydot ().</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server.helpers.nx_to_dot_subgraphs">
<span class="sig-name descname"><span class="pre">nx_to_dot_subgraphs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">960.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.helpers.nx_to_dot_subgraphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an nx graph into a dot file.</p>
<p>We’d like to sort the nodes in the graph, but nx internally uses
dictionaries “all the way down”.  Thus the only chance to sort nodes and
edges is while writing the file.  This function is a lightweight
re-implementation of nx.nx_pydot.to_pydot ().</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="server_config.html" class="btn btn-neutral float-right" title="API Server Configuration Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="client_dev.html" class="btn btn-neutral float-left" title="Web Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-20 CCeH - Licensed under the GNU GPL v3 or later.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>