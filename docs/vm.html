

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ntg.uni-muenster.de &mdash; NTG 0.1.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CBGM" href="cbgm.html" />
    <link rel="prev" title="Common Functions" href="ntg_common.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> NTG
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#basic-terms-and-procedures-of-the-coherence-based-genealogical-method-cbgm">Basic Terms and Procedures of the Coherence-Based Genealogical Method (CBGM)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="intro.html#links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install-linux.html">Installation on Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#install-prerequisites">Install Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#database-access">Database Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#application-server">Application server</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#cbgm">CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#run-server">Run Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-linux.html#build-and-run-client">Build and run client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install-docker.html">Installation with Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#running-the-web-application">Running the web application</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#running-the-cbgm">Running the CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-docker.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user.html">User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="client_user.html">Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_user.html">Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="server_user.html#server-main-py">server/__main__.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts_user.html">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-import-py">scripts/cceh/import.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-prepare-py">scripts/cceh/prepare.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-cbgm-py">scripts/cceh/cbgm.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-save-edits-py">scripts/cceh/save_edits.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-load-edits-py">scripts/cceh/load_edits.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_user.html#scripts-cceh-mk-users-py">scripts/cceh/mk_users.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="developer.html">Developer Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="client_dev.html">Web Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="client_dev.html#module-client-app">Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="server_dev.html">API Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.main">server.main</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.textflow">server.textflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.comparison">server.comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.set_cover">server.set_cover</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.editor">server.editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.login">server.login</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_dev.html#module-server.helpers">server.helpers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="server_config.html">API Server Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="server_config.html#per-application-configuration-files">Per-Application Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_config.html#global-configuration-file">Global Configuration File</a></li>
<li class="toctree-l3"><a class="reference internal" href="server_config.html#footnotes">Footnotes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts_dev.html">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.import">scripts.cceh.import</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.prepare">scripts.cceh.prepare</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.cbgm">scripts.cceh.cbgm</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.save_edits">scripts.cceh.save_edits</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.load_edits">scripts.cceh.load_edits</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts_dev.html#module-scripts.cceh.mk_users">scripts.cceh.mk_users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database.html#cbgm-database">CBGM Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#source-databases">Source Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html#literature">Literature</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database_faq.html">Database FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="database_faq.html#manual-editing-of-journalled-tables">Manual Editing of Journalled Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="database_faq.html#apparatus-updates">Apparatus Updates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ntg_common.html">Common Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.cbgm_common">ntg_common.cbgm_common</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.config">ntg_common.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.db_tools">ntg_common.db_tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.exceptions">ntg_common.exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ntg_common.html#module-ntg_common.tools">ntg_common.tools</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ntg.uni-muenster.de</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apache">Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-server">API Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#postgres">Postgres</a></li>
<li class="toctree-l3"><a class="reference internal" href="#users">Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backups">Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#icinga">Icinga</a></li>
<li class="toctree-l3"><a class="reference internal" href="#openstack-cloud">OpenStack Cloud</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cbgm.html">CBGM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#preparing-the-database-for-the-cbgm">Preparing the Database for the CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#applying-the-cbgm">Applying the CBGM</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#starting-a-new-project">Starting a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#starting-a-new-phase">Starting a New Phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="cbgm.html#starting-a-new-phase-with-apparatus-update">Starting a New Phase With Apparatus Update</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user_management.html">User Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user_management.html#manual-user-management">Manual User Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="technologies.html">Technologies Used</a><ul>
<li class="toctree-l3"><a class="reference internal" href="technologies.html#server">Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="technologies.html#client">Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="technologies.html#scripts">Scripts</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NTG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="developer.html">Developer Manual</a> &raquo;</li>
        
      <li>ntg.uni-muenster.de</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/vm.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ntg-uni-muenster-de">
<span id="vm"></span><h1>ntg.uni-muenster.de<a class="headerlink" href="#ntg-uni-muenster-de" title="Permalink to this headline">¶</a></h1>
<p>This page describes the VM <code class="code docutils literal notranslate"><span class="pre">ntg.uni-muenster.de</span></code> where the main project is
hosted.</p>
<p><code class="code docutils literal notranslate"><span class="pre">ntg.uni-muenster.de</span></code> is a Debian stable VM in the WWU OpenStack cloud.</p>
<div class="figure align-center" id="id1">
<div  class="pic pic-format-text-xml pic-language-uml pic-w100">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="591px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 1008 591" width="1008px" zoomAndPan="magnify"><defs><filter height="300%" id="f13ggur05uf1he" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--entity https--><ellipse cx="459" cy="20.5" fill="#FEFECE" filter="url(#f13ggur05uf1he)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><!--entity pubapi--><ellipse cx="512" cy="20.5" fill="#FEFECE" filter="url(#f13ggur05uf1he)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><!--entity apache--><rect fill="#FEFECE" filter="url(#f13ggur05uf1he)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="450" y="106"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="445" y="111"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="445" y="132.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="460" y="128.9951">Apache</text><!--entity api--><ellipse cx="486" cy="227.5" fill="#FEFECE" filter="url(#f13ggur05uf1he)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><!--entity app--><rect fill="#FEFECE" filter="url(#f13ggur05uf1he)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="442" y="313"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="437" y="318"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="437" y="339.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="452" y="335.9951">API server</text><!--entity pg--><rect fill="#FEFECE" filter="url(#f13ggur05uf1he)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="445" y="422"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="440" y="427"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="440" y="448.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="455" y="444.9951">Postgres</text><!--entity dba--><path d="M6,536.5 C6,526.5 32,526.5 32,526.5 C32,526.5 58,526.5 58,536.5 L58,561.7969 C58,571.7969 32,571.7969 32,571.7969 C32,571.7969 6,571.7969 6,561.7969 L6,536.5 " fill="#FFFF00" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M6,536.5 C6,546.5 32,546.5 32,546.5 C32,546.5 58,546.5 58,536.5 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="16" y="563.4951">User</text><!--entity db1--><path d="M93.5,528 C93.5,518 119,518 119,518 C119,518 144.5,518 144.5,528 L144.5,569.5938 C144.5,579.5938 119,579.5938 119,579.5938 C119,579.5938 93.5,579.5938 93.5,569.5938 L93.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M93.5,528 C93.5,538 119,538 119,538 C119,538 144.5,538 144.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="103.5" y="554.9951">Acts</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="103.5" y="571.292">Ph 4</text><!--entity db2--><path d="M179.5,528 C179.5,518 205,518 205,518 C205,518 230.5,518 230.5,528 L230.5,569.5938 C230.5,579.5938 205,579.5938 205,579.5938 C205,579.5938 179.5,579.5938 179.5,569.5938 L179.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M179.5,528 C179.5,538 205,538 205,538 C205,538 230.5,538 230.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="189.5" y="554.9951">Acts</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="189.5" y="571.292">Ph 5</text><!--entity db3--><path d="M266,528 C266,518 298,518 298,518 C298,518 330,518 330,528 L330,569.5938 C330,579.5938 298,579.5938 298,579.5938 C298,579.5938 266,579.5938 266,569.5938 L266,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M266,528 C266,538 298,538 298,538 C298,538 330,538 330,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="276" y="554.9951">Mark</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="276" y="571.292">Ph 1.2</text><!--entity db4--><path d="M365.5,528 C365.5,518 392,518 392,518 C392,518 418.5,518 418.5,528 L418.5,569.5938 C418.5,579.5938 392,579.5938 392,579.5938 C392,579.5938 365.5,579.5938 365.5,569.5938 L365.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M365.5,528 C365.5,538 392,538 392,538 C392,538 418.5,538 418.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="375.5" y="554.9951">Mark</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="375.5" y="571.292">Ph 2</text><!--entity db5--><path d="M454,528 C454,518 486,518 486,518 C486,518 518,518 518,528 L518,569.5938 C518,579.5938 486,579.5938 486,579.5938 C486,579.5938 454,579.5938 454,569.5938 L454,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M454,528 C454,538 486,538 486,538 C486,538 518,538 518,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="464" y="554.9951">Mark</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="464" y="571.292">Ph 2.2</text><!--entity db6--><path d="M553.5,528 C553.5,518 579,518 579,518 C579,518 604.5,518 604.5,528 L604.5,569.5938 C604.5,579.5938 579,579.5938 579,579.5938 C579,579.5938 553.5,579.5938 553.5,569.5938 L553.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M553.5,528 C553.5,538 579,538 579,538 C579,538 604.5,538 604.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="563.5" y="554.9951">John</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="563.5" y="571.292">Ph 1</text><!--entity db7--><path d="M639.5,528 C639.5,518 681,518 681,518 C681,518 722.5,518 722.5,528 L722.5,569.5938 C722.5,579.5938 681,579.5938 681,579.5938 C681,579.5938 639.5,579.5938 639.5,569.5938 L639.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M639.5,528 C639.5,538 681,538 681,538 C681,538 722.5,538 722.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="649.5" y="554.9951">John Fam</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="649.5" y="571.292">Ph 1</text><!--entity db8--><path d="M757.5,528 C757.5,518 787,518 787,518 C787,518 816.5,518 816.5,528 L816.5,569.5938 C816.5,579.5938 787,579.5938 787,579.5938 C787,579.5938 757.5,579.5938 757.5,569.5938 L757.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M757.5,528 C757.5,538 787,538 787,538 C787,538 816.5,538 816.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="767.5" y="554.9951">2Sam</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="767.5" y="571.292">Ph 1</text><!--entity db9--><path d="M851.5,528 C851.5,518 881,518 881,518 C881,518 910.5,518 910.5,528 L910.5,569.5938 C910.5,579.5938 881,579.5938 881,579.5938 C881,579.5938 851.5,579.5938 851.5,569.5938 L851.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M851.5,528 C851.5,538 881,538 881,538 C881,538 910.5,538 910.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="861.5" y="554.9951">2Sam</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="861.5" y="571.292">Ph 2</text><!--entity db10--><path d="M945.5,528 C945.5,518 971,518 971,518 C971,518 996.5,518 996.5,528 L996.5,569.5938 C996.5,579.5938 971,579.5938 971,579.5938 C971,579.5938 945.5,579.5938 945.5,569.5938 L945.5,528 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M945.5,528 C945.5,538 971,538 971,538 C971,538 996.5,538 996.5,528 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="17" x="955.5" y="554.9951">CL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="955.5" y="571.292">Ph 2</text><!--entity client--><path d="M339.5,103 C339.5,93 377,93 377,93 C377,93 414.5,93 414.5,103 L414.5,144.5938 C414.5,154.5938 377,154.5938 377,154.5938 C377,154.5938 339.5,154.5938 339.5,144.5938 L339.5,103 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M339.5,103 C339.5,113 377,113 377,113 C377,113 414.5,113 414.5,103 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="349.5" y="129.9951">JS Client</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="349.5" y="146.292">Files</text><!--entity config--><path d="M343,310 C343,300 375,300 375,300 C375,300 407,300 407,310 L407,351.5938 C407,361.5938 375,361.5938 375,361.5938 C375,361.5938 343,361.5938 343,351.5938 L343,310 " fill="#FEFECE" filter="url(#f13ggur05uf1he)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M343,310 C343,320 375,320 375,320 C375,320 407,320 407,310 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="353" y="336.9951">Config</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="353" y="353.292">Files</text><path d="M213.5,8 L213.5,33.1328 A0,0 0 0 0 213.5,33.1328 L414.5,33.1328 A0,0 0 0 0 414.5,33.1328 L414.5,26 L449.9685,20.5 L414.5,18 L414.5,18 L404.5,8 L213.5,8 A0,0 0 0 0 213.5,8 " fill="#FBFB77" filter="url(#f13ggur05uf1he)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M404.5,8 L404.5,18 L414.5,18 L404.5,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="219.5" y="25.0669">https://ntg.uni-muenster.de/</text><path d="M556,8 L556,16.5 L521.1406,20.5 L556,24.5 L556,33.1328 A0,0 0 0 0 556,33.1328 L780,33.1328 A0,0 0 0 0 780,33.1328 L780,18 L770,8 L556,8 A0,0 0 0 0 556,8 " fill="#FBFB77" filter="url(#f13ggur05uf1he)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M770,8 L770,18 L780,18 L770,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="562" y="25.0669">https://ntg.uni-muenster.de/api/</text><path d="M203.5,111.5 L203.5,136.6328 A0,0 0 0 0 203.5,136.6328 L304.5,136.6328 A0,0 0 0 0 304.5,136.6328 L304.5,129.5 L339.2757,124 L304.5,121.5 L304.5,121.5 L294.5,111.5 L203.5,111.5 A0,0 0 0 0 203.5,111.5 " fill="#FBFB77" filter="url(#f13ggur05uf1he)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M294.5,111.5 L294.5,121.5 L304.5,121.5 L294.5,111.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="209.5" y="128.5669">/var/www/ntg</text><path d="M530.5,215 L530.5,223.5 L495.1602,227.5 L530.5,231.5 L530.5,240.1328 A0,0 0 0 0 530.5,240.1328 L709.5,240.1328 A0,0 0 0 0 709.5,240.1328 L709.5,225 L699.5,215 L530.5,215 A0,0 0 0 0 530.5,215 " fill="#FBFB77" filter="url(#f13ggur05uf1he)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M699.5,215 L699.5,225 L709.5,225 L699.5,215 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="536.5" y="232.0669">http://localhost:5000/api/</text><path d="M84.5,318.5 L84.5,343.6328 A0,0 0 0 0 84.5,343.6328 L307.5,343.6328 A0,0 0 0 0 307.5,343.6328 L307.5,336.5 L342.8441,331 L307.5,328.5 L307.5,328.5 L297.5,318.5 L84.5,318.5 A0,0 0 0 0 84.5,318.5 " fill="#FBFB77" filter="url(#f13ggur05uf1he)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M297.5,318.5 L297.5,328.5 L307.5,328.5 L297.5,318.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="90.5" y="335.5669">~ntg/prj/ntg/ntg/instance/*.conf</text><!--link https to apache--><path d="M461.3961,29.6849 C465.5236,45.5071 474.0944,78.3618 479.9472,100.7976 " fill="none" id="https-apache" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="481.2254,105.6974,482.824,95.9791,479.9632,100.8593,475.0831,97.9986,481.2254,105.6974" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pubapi to apache--><path d="M509.6927,29.6849 C505.718,45.5071 497.4647,78.3618 491.8286,100.7976 " fill="none" id="pubapi-apache" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="490.5978,105.6974,496.6702,97.9433,491.8161,100.8481,488.9113,95.994,490.5978,105.6974" style="stroke: #A80036; stroke-width: 1.0;"/><!--link client to apache--><path d="M420.0894,124 C430.0235,124 439.9576,124 449.8918,124 " fill="none" id="client-apache" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="414.8945,124,423.8945,128,419.8945,124,423.8945,120,414.8945,124" style="stroke: #A80036; stroke-width: 1.0;"/><!--link apache to api--><path d="M486,142.0283 C486,162.1834 486,194.426 486,213.0134 " fill="none" id="apache-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="486,218.3151,490,209.3151,486,213.3151,482,209.3151,486,218.3151" style="stroke: #A80036; stroke-width: 1.0;"/><!--link api to app--><path d="M486,236.6849 C486,252.4406 486,285.086 486,307.5142 " fill="none" id="api-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="486,312.6974,490,303.6974,486,307.6974,482,303.6974,486,312.6974" style="stroke: #A80036; stroke-width: 1.0;"/><!--link config to app--><path d="M412.2565,331 C422.144,331 432.0316,331 441.9191,331 " fill="none" id="config-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="407.0859,331,416.0859,335,412.0859,331,416.0859,327,407.0859,331" style="stroke: #A80036; stroke-width: 1.0;"/><!--link app to pg--><path d="M486,349.4904 C486,368.0014 486,396.5443 486,416.6175 " fill="none" id="app-pg" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="486,421.7827,490,412.7827,486,416.7827,482,412.7827,486,421.7827" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to dba--><path d="M444.7703,442.0871 C368.9349,447.1562 203.421,463.9945 76,518 C71.4831,519.9144 66.9684,522.3474 62.6448,525.0057 " fill="none" id="pg-dba" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="58.392,527.7283,68.1285,526.2446,62.603,525.0325,63.8151,519.507,58.392,527.7283" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db1--><path d="M444.9423,444.7013 C381.7616,453.0597 257.9575,473.9407 162,518 C157.7006,519.9741 153.394,522.4054 149.2565,525.0306 " fill="none" id="pg-db1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="144.8415,527.943,154.5567,526.3261,149.0152,525.1897,150.1515,519.6482,144.8415,527.943" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db2--><path d="M444.9128,449.3565 C396.2374,461.3573 313.4941,484.6762 248,518 C243.5707,520.2536 239.0968,522.9359 234.7941,525.7656 " fill="none" id="pg-db2" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="230.5565,528.634,240.2517,526.9013,234.697,525.8312,235.7672,520.2765,230.5565,528.634" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db3--><path d="M453.163,458.0687 C425.0674,473.6453 383.6368,496.8931 348,518 C343.65,520.5764 339.1128,523.3155 334.6235,526.058 " fill="none" id="pg-db3" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="330.1589,528.7958,339.9223,527.5012,334.4214,526.1821,335.7404,520.6812,330.1589,528.7958" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db4--><path d="M470.0542,458.4904 C457.0033,473.6238 438.1703,495.4621 422.2732,513.8959 " fill="none" id="pg-db4" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="418.7205,518.0156,427.6274,513.8124,421.9859,514.2292,421.5691,508.5877,418.7205,518.0156" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db5--><path d="M486,458.4904 C486,473.2584 486,494.4115 486,512.5549 " fill="none" id="pg-db5" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="486,517.5847,490,508.5847,486,512.5847,482,508.5847,486,517.5847" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db6--><path d="M501.7762,458.4904 C514.8809,473.8496 533.8784,496.1155 549.7511,514.719 " fill="none" id="pg-db6" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="553.2949,518.8725,550.4964,509.4296,550.0496,515.0688,544.4104,514.6221,553.2949,518.8725" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db7--><path d="M518.6386,458.2441 C550.39,475.9923 598.9369,503.1288 634.6783,523.1074 " fill="none" id="pg-db7" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="639.4124,525.7536,633.5081,517.8708,635.0479,523.314,629.6047,524.8539,639.4124,525.7536" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db8--><path d="M527.3625,448.8585 C578.7654,460.7245 668.4402,484.2664 740,518 C744.3766,520.0632 748.8179,522.4875 753.1353,525.0561 " fill="none" id="pg-db8" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="757.4044,527.6649,751.8104,519.5589,753.1379,525.0578,747.639,526.3853,757.4044,527.6649" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db9--><path d="M527.1291,444.3346 C593.7869,452.4193 728.5778,473.2062 834,518 C838.2944,519.8247 842.6213,522.0467 846.8195,524.4544 " fill="none" id="pg-db9" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="851.3167,527.13,845.6271,519.0908,847.0196,524.5736,841.5368,525.9662,851.3167,527.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--link pg to db10--><path d="M527.0244,441.1728 C607.1855,444.7528 788.9239,459.2563 928,518 C932.3581,519.8408 936.6998,522.1923 940.856,524.7752 " fill="none" id="pg-db10" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="945.2851,527.6556,939.9211,519.3956,941.0936,524.9296,935.5595,526.1021,945.2851,527.6556" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
skinparam backgroundColor transparent

interface " "               as https
interface " "               as pubapi
component "Apache"          as apache
interface " "               as api
component "API server"      as app
component "Postgres"        as pg

database  "User"            as dba #yellow

database  "Acts\nPh 4"      as db1
database  "Acts\nPh 5"      as db2
database  "Mark\nPh 1.2"    as db3
database  "Mark\nPh 2"      as db4
database  "Mark\nPh 2.2"    as db5
database  "John\nPh 1"      as db6
database  "John Fam\nPh 1"  as db7
database  "2Sam\nPh 1"      as db8
database  "2Sam\nPh 2"      as db9
database  "CL\nPh 2"        as db10

database  "JS Client\nFiles"  as client
database  "Config\nFiles"     as config

note left  of https:   https://ntg.uni-muenster.de/
note right of pubapi:  https://ntg.uni-muenster.de/api/
note left  of client:  /var/www/ntg
note right of api:     http://localhost:5000/api/
note left  of config:  ~ntg/prj/ntg/ntg/instance/*.conf

https   - -> apache
pubapi  - -> apache
client  <-  apache
apache  - -> api
api     - -> app
config  <-  app
app     - -> pg

pg      - -> dba

pg      - -> db1
pg      - -> db2
pg      - -> db3
pg      - -> db4
pg      - -> db5
pg      - -> db6
pg      - -> db7
pg      - -> db8
pg      - -> db9
pg      - -> db10
@enduml

PlantUML version 1.2018.13(Mon Nov 26 17:11:51 UTC 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.12+7-post-Debian-2deb10u1
Operating System: Linux
OS Version: 4.19.0-13-cloud-amd64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">Overview of VM</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="apache">
<h2>Apache<a class="headerlink" href="#apache" title="Permalink to this headline">¶</a></h2>
<p>The Apache server has 2 functions:</p>
<ul class="simple">
<li><p>to serve the javascript client files and</p></li>
<li><p>to proxy the public API endpoint to the local App server.</p></li>
</ul>
<p>The javascript client files are served from <code class="file docutils literal notranslate"><span class="pre">/var/www/ntg/</span></code>.
The javascript client also needs to know where to find the world-visible API endpoint.
That is configured in the file <code class="file docutils literal notranslate"><span class="pre">/var/www/ntg/api.conf.js</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">api_base_url</span> <span class="o">=</span> <span class="s1">&#39;https://ntg.uni-muenster.de/api/&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Apache also proxies all api requests from the client to the API server.
The world-visible API endpoint “<a class="reference external" href="https://ntg.uni-muenster.de/api/">https://ntg.uni-muenster.de/api/</a>” is proxied
to the internal “<a class="reference external" href="http://localhost:5000/api/">http://localhost:5000/api/</a>” using mod_rewrite.
Apache does all SSL stuff.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not hardwired: as an alternative the API server could be made
world-visible on an URL of its own, eg. “<a class="reference external" href="https://api.ntg.uni-muenster.de/">https://api.ntg.uni-muenster.de/</a>”
but that would require an extra DNS entry and certificate.</p>
</div>
</div>
<div class="section" id="api-server">
<h2>API Server<a class="headerlink" href="#api-server" title="Permalink to this headline">¶</a></h2>
<p>The API server loads its configuration from the <code class="file docutils literal notranslate"><span class="pre">~ntg/prj/ntg/ntg/instance/</span></code>
directory, one config file for each project. See <a class="reference internal" href="server_config.html#api-server-config-files"><span class="std std-ref">API Server Configuration Files</span></a>.</p>
<p>The API server runs as systemd service, owned by the user “ntg” and controlled
by the file: <code class="file docutils literal notranslate"><span class="pre">/etc/systemd/system/ntg.service</span></code>.</p>
<p>The user “ntg” has sudo rights to control the API server:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo /bin/systemctl start ntg
sudo /bin/systemctl stop ntg
sudo /bin/systemctl restart ntg
sudo /bin/systemctl status ntg
sudo /bin/journalctl -u ntg
</pre></div>
</div>
</div>
<div class="section" id="postgres">
<h2>Postgres<a class="headerlink" href="#postgres" title="Permalink to this headline">¶</a></h2>
<p>A standard PostgreSQL installation.</p>
<p>The Postgres server has one database for each project,
plus the <code class="code docutils literal notranslate"><span class="pre">ntg_user</span></code> database for <a class="reference internal" href="user_management.html#user-management"><span class="std std-ref">user credentials</span></a>.</p>
<p>Postgres data resides in its own filesystem mounted at <code class="file docutils literal notranslate"><span class="pre">/var/lib/postgresql</span></code>.</p>
</div>
<div class="section" id="users">
<h2>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h2>
<p>The user “ntg” owns:</p>
<blockquote>
<div><ul class="simple">
<li><p>the API server and has sudo rights to restart it,</p></li>
<li><p>all Postgres databases shown above,</p></li>
<li><p>the <code class="file docutils literal notranslate"><span class="pre">/var/www/ntg</span></code> directory where the JS client files reside.</p></li>
</ul>
</div></blockquote>
<p>The user “postgres” is the database superuser.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You have to be a database superuser to create new project databases
because the mysql_fdw extension says so.</p>
</div>
<div class="section" id="developers">
<h3>Developers<a class="headerlink" href="#developers" title="Permalink to this headline">¶</a></h3>
<p>Developers have sudo rights on this VM, so they can gain user “ntg” or “postgres”.</p>
<p>Ideally you should always login using SSH public key authentication and no user
password should be set on your account at all.  To be able to sudo without a
password you must forward your authentication agent when you ssh into this
machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -A username@ntg.uni-muenster.de
</pre></div>
</div>
<p>Then, if everything works, sudo should not ask you for a password.</p>
</div>
<div class="section" id="add-a-new-developer-to-the-vm">
<h3>Add a new developer to the VM<a class="headerlink" href="#add-a-new-developer-to-the-vm" title="Permalink to this headline">¶</a></h3>
<p>You need the new developer to send you their public SSH key and
store it in the file <code class="file docutils literal notranslate"><span class="pre">/tmp/id_rsa.pub</span></code> on your local machine.
Then ssh into the VM and add the new user $NEWUSER
setting a temporary password:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo adduser <span class="nv">$NEWUSER</span>
</pre></div>
</div>
<p>Open another shell on your local machine and say:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh-copy-id -f -i /tmp/id_rsa.pub <span class="nv">$NEWUSER</span>@ntg.uni-muenster.de
</pre></div>
</div>
<p>Close this shell and on the VM again, disable the temp password and add the
developer to the sudoers.  To give sudo rights to a user without password add
their public key to the file <code class="file docutils literal notranslate"><span class="pre">/etc/security/authorized_keys</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo passwd -d -l <span class="nv">$NEWUSER</span>
sudo usermod -aG sudo <span class="nv">$NEWUSER</span>
sudo bash -c <span class="s2">&quot;cat ~</span><span class="nv">$NEWUSER</span><span class="s2">/.ssh/authorized_keys &gt;&gt; /etc/security/authorized_keys&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="backups">
<span id="vm-backups"></span><h2>Backups<a class="headerlink" href="#backups" title="Permalink to this headline">¶</a></h2>
<p>The editorial decisions for all active databases are backed up every night and
the active databases are backed up weekly. See:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -u ntg crontab -l
</pre></div>
</div>
<p>Active databases are those that are not set read-only.
The active databases are configured in the file <code class="file docutils literal notranslate"><span class="pre">scripts/cceh/active_databases</span></code>.</p>
<p>Also full server backups are scheduled with backup2l. See: <code class="file docutils literal notranslate"><span class="pre">/etc/backup2l.conf</span></code>.</p>
<p>Backups reside in their own filesystem mounted at <code class="file docutils literal notranslate"><span class="pre">/backup</span></code>.</p>
<div class="section" id="manual-backups">
<h3>Manual Backups<a class="headerlink" href="#manual-backups" title="Permalink to this headline">¶</a></h3>
<p>Do a manual backup of all editorial decisions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -u ntg ~ntg/prj/ntg/ntg/scripts/cceh/backup_active_edits.sh
</pre></div>
</div>
<p>Destination directory <code class="file docutils literal notranslate"><span class="pre">/backup/saved_edits/</span></code>.</p>
<p>Do a manual backup of all active databases:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -u ntg ~ntg/prj/ntg/ntg/scripts/cceh/backup_active_databases.sh
</pre></div>
</div>
<p>Destination directory <code class="file docutils literal notranslate"><span class="pre">/backup/saved_databases/</span></code>.</p>
<p>Do a manual backup of all databases inclusive user database:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -u postgres ~ntg/prj/ntg/ntg/scripts/cceh/backup_all_databases.sh
</pre></div>
</div>
<p>Destination directory <code class="file docutils literal notranslate"><span class="pre">/backup/postgres/</span></code>.</p>
</div>
</div>
<div class="section" id="icinga">
<h2>Icinga<a class="headerlink" href="#icinga" title="Permalink to this headline">¶</a></h2>
<p>Icinga is a monitoring software.  The VM is configured as Icinga satellite.</p>
<p>See under: <code class="file docutils literal notranslate"><span class="pre">/etc/icinga2/</span></code></p>
</div>
<div class="section" id="openstack-cloud">
<h2>OpenStack Cloud<a class="headerlink" href="#openstack-cloud" title="Permalink to this headline">¶</a></h2>
<p>To administer the VM in the cloud: add disks, memory, CPUs, snapshots, disaster recovery etc.</p>
<p>Point your browser to:</p>
<blockquote>
<div><p><a class="reference external" href="https://openstack.wwu.de/">https://openstack.wwu.de/</a></p>
</div></blockquote>
<p>Select: <span class="guilabel">DFN AAI Single Sign-On</span> and go through the login process.</p>
<p>Then go to:</p>
<blockquote>
<div><p><span class="guilabel">Project | Compute |  Instances</span></p>
</div></blockquote>
<p>You can now manage the VM.</p>
<p>For disaster recovery select <span class="guilabel">Console</span> from the <span class="guilabel">Actions</span> dropdown
and login using the ‘debian’ user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are issues with keyboard layout. It works best if you select the
English (US) layout for your browser window.  Some keys (&lt;&gt;|) still don’t
work though.</p>
</div>
<p>Help chat:</p>
<blockquote>
<div><p><a class="reference external" href="https://zivmattermost.uni-muenster.de/wwu/channels/wwucloud">https://zivmattermost.uni-muenster.de/wwu/channels/wwucloud</a></p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cbgm.html" class="btn btn-neutral float-right" title="CBGM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ntg_common.html" class="btn btn-neutral float-left" title="Common Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-20 CCeH - Licensed under the GNU GPL v3 or later.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>